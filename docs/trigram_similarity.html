<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>dhivehi_nlp.trigram_similarity API documentation</title>
<meta name="description" content="Trigram similarity divides words or phrases into sequences of three
consecutive characters, placed in a set where the order doesn&#39;t matter and
…" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>dhivehi_nlp.trigram_similarity</code></h1>
</header>
<section id="section-intro">
<p>Trigram similarity divides words or phrases into sequences of three
consecutive characters, placed in a set where the order doesn't matter and
duplicates are removed. Used to find string matches even if certain characters
are different, based on similarity value.</p>
<p>ލިޔުނު އަކުރުތަކާ ނުވަތަ ބަސްތަކާއި އެއްގޮތް ބަސްތައް ހޯދުން</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Trigram similarity divides words or phrases into sequences of three
consecutive characters, placed in a set where the order doesn&#39;t matter and
duplicates are removed. Used to find string matches even if certain characters
are different, based on similarity value.

ލިޔުނު އަކުރުތަކާ ނުވަތަ ބަސްތަކާއި އެއްގޮތް ބަސްތައް ހޯދުން
&#34;&#34;&#34;

import re
from dhivehi_nlp import dictionary, tokenizer


def generate_trigrams(text: str) -&gt; set:
    &#34;&#34;&#34;
    Return a set of trigrams in a given text.
    Preprocessing is done where each space is changed to two spaces. Also, two
    spaces to the beginning and one space to the end of the string are added.

    ލިޔެފައިވާ ބަހުގެ ނުވަތަ ބަސްތަކުގެ ޓްރައިގްރާމްތައް ސެޓެއްގެ ގޮތުގައި އަނބުރާ ދޭނެއެވެ

    &gt;&gt;&gt; generate_trigrams(&#34;ބަޔަކު&#34;)
    {
        &#34;  ބ&#34;,
        &#34; ބަ&#34;,
        &#34;ބަޔ&#34;,
        &#34;ަޔަ&#34;,
        &#34;ޔަކ&#34;,
        &#34;ަކު&#34;,
        &#34;ކު &#34;,
    }
    &#34;&#34;&#34;
    text = text.strip()
    text = re.sub(&#34; &#34;, &#34;  &#34;, text)
    text = f&#34;  {text} &#34;
    return set([text[i : i + 3] for i in range(len(text) - 2)])


def _compare_trigrams(trig1: set, trig2: set) -&gt; float:
    &#34;&#34;&#34;
    Checks how many trigrams from the first set are present in the second and
    returns that value divided by the length of the second set.
    &#34;&#34;&#34;
    count = 0
    for i in trig1:
        if i in trig2:
            count += 1
    return count / len(trig2)


def get_similarity(query: str, text=None, max_output=10) -&gt; list:
    &#34;&#34;&#34;
    Finds the trigram similarity of words compared to the query string and
    returns a list of similar words from the text list ordered according to
    similarity in descending order.
    The text keyword argument should be a list of strings.
    If a list of words are not provided in the text keyword argument, the
    wordlist from the dictionary is used instead.
    The max_output keyword argument determines the size of the return list and
    is set to 10 by default if argument is not given.

    ލިޔުނު ބަހާއި އެއްގޮތް ބަސްތައް އެއްގޮތްވާ ނިސްބަތުން ލިސްޓެއް ގޮތުގައި އަނބުރާ ދޭނެއެވެ

    &gt;&gt;&gt; get_similarity(&#34;ބަޔަކު&#34;, max_output=5)
    [
        {&#34;word&#34;: &#34;ބަޔަކު&#34;, &#34;similarity&#34;: 1.0},
        {&#34;word&#34;: &#34;ބަ&#34;, &#34;similarity&#34;: 0.6666666666666666},
        {&#34;word&#34;: &#34;ބ&#34;, &#34;similarity&#34;: 0.5},
        {&#34;word&#34;: &#34;ބަޔޭބަޔޭ&#34;, &#34;similarity&#34;: 0.42857142857142855},
        {&#34;word&#34;: &#34;ބަޔާން&#34;, &#34;similarity&#34;: 0.42857142857142855},
    ]

    &gt;&gt;&gt; text = &#34;ރަށްތައް އުފެދިފައިވާ ގޮތުން ވަކިވަކި ކުދިކުދި ރަށްރަށް ހުރި ކަމުގައި ވިޔަސް އެއްބަޔަކު އަނެއް ބަޔަކަށް ބަރޯސާވާ ކަމާއި ވަކި ދަތުރުފަތުރުކޮށް އެއްބައެއްގެ&#34;.split()
    &gt;&gt;&gt; get_similarity(&#34;ބަޔަކު&#34;, text, max_output=3)
    [
        {&#34;word&#34;: &#34;ބަޔަކަށް&#34;, &#34;similarity&#34;: 0.5555555555555556},
        {&#34;word&#34;: &#34;އެއްބަޔަކު&#34;, &#34;similarity&#34;: 0.45454545454545453},
        {&#34;word&#34;: &#34;ބަރޯސާވާ&#34;, &#34;similarity&#34;: 0.2222222222222222},
    ]
    &#34;&#34;&#34;
    query_trig = generate_trigrams(query)
    if text == None:
        text = dictionary.get_wordlist()
    else:
        text = tokenizer.word_tokenize(text, removePunctuation=True)
    results = []
    for word in text:
        word_trig = generate_trigrams(word)
        results.append(
            {&#34;word&#34;: word, &#34;similarity&#34;: _compare_trigrams(query_trig, word_trig)}
        )
    results = sorted(results, key=lambda k: k[&#34;similarity&#34;])[::-1]
    if len(results) &gt; max_output:
        results = results[:max_output]
    results = [i for i in results if i[&#34;similarity&#34;] != 0]
    return results</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="dhivehi_nlp.trigram_similarity.generate_trigrams"><code class="name flex">
<span>def <span class="ident">generate_trigrams</span></span>(<span>text: str) ‑> set</span>
</code></dt>
<dd>
<div class="desc"><p>Return a set of trigrams in a given text.
Preprocessing is done where each space is changed to two spaces. Also, two
spaces to the beginning and one space to the end of the string are added.</p>
<p>ލިޔެފައިވާ ބަހުގެ ނުވަތަ ބަސްތަކުގެ ޓްރައިގްރާމްތައް ސެޓެއްގެ ގޮތުގައި އަނބުރާ ދޭނެއެވެ</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; generate_trigrams(&quot;ބަޔަކު&quot;)
{
    &quot;  ބ&quot;,
    &quot; ބަ&quot;,
    &quot;ބަޔ&quot;,
    &quot;ަޔަ&quot;,
    &quot;ޔަކ&quot;,
    &quot;ަކު&quot;,
    &quot;ކު &quot;,
}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generate_trigrams(text: str) -&gt; set:
    &#34;&#34;&#34;
    Return a set of trigrams in a given text.
    Preprocessing is done where each space is changed to two spaces. Also, two
    spaces to the beginning and one space to the end of the string are added.

    ލިޔެފައިވާ ބަހުގެ ނުވަތަ ބަސްތަކުގެ ޓްރައިގްރާމްތައް ސެޓެއްގެ ގޮތުގައި އަނބުރާ ދޭނެއެވެ

    &gt;&gt;&gt; generate_trigrams(&#34;ބަޔަކު&#34;)
    {
        &#34;  ބ&#34;,
        &#34; ބަ&#34;,
        &#34;ބަޔ&#34;,
        &#34;ަޔަ&#34;,
        &#34;ޔަކ&#34;,
        &#34;ަކު&#34;,
        &#34;ކު &#34;,
    }
    &#34;&#34;&#34;
    text = text.strip()
    text = re.sub(&#34; &#34;, &#34;  &#34;, text)
    text = f&#34;  {text} &#34;
    return set([text[i : i + 3] for i in range(len(text) - 2)])</code></pre>
</details>
</dd>
<dt id="dhivehi_nlp.trigram_similarity.get_similarity"><code class="name flex">
<span>def <span class="ident">get_similarity</span></span>(<span>query: str, text=None, max_output=10) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p>Finds the trigram similarity of words compared to the query string and
returns a list of similar words from the text list ordered according to
similarity in descending order.
The text keyword argument should be a list of strings.
If a list of words are not provided in the text keyword argument, the
wordlist from the dictionary is used instead.
The max_output keyword argument determines the size of the return list and
is set to 10 by default if argument is not given.</p>
<p>ލިޔުނު ބަހާއި އެއްގޮތް ބަސްތައް އެއްގޮތްވާ ނިސްބަތުން ލިސްޓެއް ގޮތުގައި އަނބުރާ ދޭނެއެވެ</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; get_similarity(&quot;ބަޔަކު&quot;, max_output=5)
[
    {&quot;word&quot;: &quot;ބަޔަކު&quot;, &quot;similarity&quot;: 1.0},
    {&quot;word&quot;: &quot;ބަ&quot;, &quot;similarity&quot;: 0.6666666666666666},
    {&quot;word&quot;: &quot;ބ&quot;, &quot;similarity&quot;: 0.5},
    {&quot;word&quot;: &quot;ބަޔޭބަޔޭ&quot;, &quot;similarity&quot;: 0.42857142857142855},
    {&quot;word&quot;: &quot;ބަޔާން&quot;, &quot;similarity&quot;: 0.42857142857142855},
]
</code></pre>
<pre><code class="language-python-repl">&gt;&gt;&gt; text = &quot;ރަށްތައް އުފެދިފައިވާ ގޮތުން ވަކިވަކި ކުދިކުދި ރަށްރަށް ހުރި ކަމުގައި ވިޔަސް އެއްބަޔަކު އަނެއް ބަޔަކަށް ބަރޯސާވާ ކަމާއި ވަކި ދަތުރުފަތުރުކޮށް އެއްބައެއްގެ&quot;.split()
&gt;&gt;&gt; get_similarity(&quot;ބަޔަކު&quot;, text, max_output=3)
[
    {&quot;word&quot;: &quot;ބަޔަކަށް&quot;, &quot;similarity&quot;: 0.5555555555555556},
    {&quot;word&quot;: &quot;އެއްބަޔަކު&quot;, &quot;similarity&quot;: 0.45454545454545453},
    {&quot;word&quot;: &quot;ބަރޯސާވާ&quot;, &quot;similarity&quot;: 0.2222222222222222},
]
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_similarity(query: str, text=None, max_output=10) -&gt; list:
    &#34;&#34;&#34;
    Finds the trigram similarity of words compared to the query string and
    returns a list of similar words from the text list ordered according to
    similarity in descending order.
    The text keyword argument should be a list of strings.
    If a list of words are not provided in the text keyword argument, the
    wordlist from the dictionary is used instead.
    The max_output keyword argument determines the size of the return list and
    is set to 10 by default if argument is not given.

    ލިޔުނު ބަހާއި އެއްގޮތް ބަސްތައް އެއްގޮތްވާ ނިސްބަތުން ލިސްޓެއް ގޮތުގައި އަނބުރާ ދޭނެއެވެ

    &gt;&gt;&gt; get_similarity(&#34;ބަޔަކު&#34;, max_output=5)
    [
        {&#34;word&#34;: &#34;ބަޔަކު&#34;, &#34;similarity&#34;: 1.0},
        {&#34;word&#34;: &#34;ބަ&#34;, &#34;similarity&#34;: 0.6666666666666666},
        {&#34;word&#34;: &#34;ބ&#34;, &#34;similarity&#34;: 0.5},
        {&#34;word&#34;: &#34;ބަޔޭބަޔޭ&#34;, &#34;similarity&#34;: 0.42857142857142855},
        {&#34;word&#34;: &#34;ބަޔާން&#34;, &#34;similarity&#34;: 0.42857142857142855},
    ]

    &gt;&gt;&gt; text = &#34;ރަށްތައް އުފެދިފައިވާ ގޮތުން ވަކިވަކި ކުދިކުދި ރަށްރަށް ހުރި ކަމުގައި ވިޔަސް އެއްބަޔަކު އަނެއް ބަޔަކަށް ބަރޯސާވާ ކަމާއި ވަކި ދަތުރުފަތުރުކޮށް އެއްބައެއްގެ&#34;.split()
    &gt;&gt;&gt; get_similarity(&#34;ބަޔަކު&#34;, text, max_output=3)
    [
        {&#34;word&#34;: &#34;ބަޔަކަށް&#34;, &#34;similarity&#34;: 0.5555555555555556},
        {&#34;word&#34;: &#34;އެއްބަޔަކު&#34;, &#34;similarity&#34;: 0.45454545454545453},
        {&#34;word&#34;: &#34;ބަރޯސާވާ&#34;, &#34;similarity&#34;: 0.2222222222222222},
    ]
    &#34;&#34;&#34;
    query_trig = generate_trigrams(query)
    if text == None:
        text = dictionary.get_wordlist()
    else:
        text = tokenizer.word_tokenize(text, removePunctuation=True)
    results = []
    for word in text:
        word_trig = generate_trigrams(word)
        results.append(
            {&#34;word&#34;: word, &#34;similarity&#34;: _compare_trigrams(query_trig, word_trig)}
        )
    results = sorted(results, key=lambda k: k[&#34;similarity&#34;])[::-1]
    if len(results) &gt; max_output:
        results = results[:max_output]
    results = [i for i in results if i[&#34;similarity&#34;] != 0]
    return results</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="dhivehi_nlp" href="index.html">dhivehi_nlp</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="dhivehi_nlp.trigram_similarity.generate_trigrams" href="#dhivehi_nlp.trigram_similarity.generate_trigrams">generate_trigrams</a></code></li>
<li><code><a title="dhivehi_nlp.trigram_similarity.get_similarity" href="#dhivehi_nlp.trigram_similarity.get_similarity">get_similarity</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>